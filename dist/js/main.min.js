const albumFlag=document.querySelector(".album__btn-flag"),albumSheets=document.querySelectorAll(".album__sheet"),album=document.querySelector(".album"),cancelBtn=document.querySelector(".connect__cancel"),popupsWrapper=document.querySelector(".popups"),works=document.querySelectorAll(".works__item"),popups=document.querySelectorAll(".popup"),albumBtns=Array.from(document.querySelectorAll(".album__btn")),tabPages=Array.from(document.querySelectorAll(".tab-page")).reverse();let clickedWorksTargetNumber;albumSheets.forEach(e=>{e.addEventListener("animationstart",(function(){album.classList.contains("animating")||album.classList.add("animating")})),e.addEventListener("animationend",(function(){album.classList.contains("animating")&&album.classList.remove("animating")}))}),albumFlag.addEventListener("click",(function(){albumFlag.classList.remove("show"),albumFlag.classList.add("close"),albumSheets.forEach(e=>{e.classList.contains("open")&&!album.classList.contains("animating")?(e.classList.remove("open"),e.classList.add("close")):album.classList.contains("animating")||(e.classList.add("open"),e.classList.remove("close"))})})),cancelBtn.addEventListener("click",(function(){albumFlag.classList.remove("close"),albumFlag.classList.add("show"),albumSheets.forEach(e=>{e.classList.contains("open")&&!album.classList.contains("animating")?(e.classList.remove("open"),e.classList.add("close")):album.classList.contains("animating")||(e.classList.add("open"),e.classList.remove("close"))})})),works.forEach(e=>{e.addEventListener("click",(function(e){for(let a=0;a<works.length;a++)e.currentTarget==works[a]&&(clickedWorksTargetNumber=a);popupsWrapper.style.top=String(Math.round(window.scrollY)+"px"),popupsWrapper.classList.add("open"),popups[clickedWorksTargetNumber].classList.add("open"),document.body.style.overflow="hidden"}))}),popupsWrapper.addEventListener("click",(function(e){"popups open"==e.target.className&&(popupsWrapper.classList.remove("open"),popups[clickedWorksTargetNumber].classList.remove("open"),document.body.style.overflow="")}));const ajaxSend=async e=>{const a=await fetch("../mail.php",{method:"POST",body:e});if(!a.ok)throw new Error(`Ошибка по адрему ${url}, статус ошибки \n        ${a.status}`);return await a.text()},mailForm=document.querySelector(".connect__form");mailForm.addEventListener("submit",(function(e){e.preventDefault(),alert("!");const a=new FormData(this);ajaxSend(a).then(e=>{console.log(e),form.reset()}).catch(e=>console.log(e))})),albumBtns.forEach(e=>{e.addEventListener("click",(function(){if(!e.classList.contains("active")){for(let e=0;e<albumBtns.length;e++)albumBtns[e].classList.remove("active"),tabPages[e].classList.remove("active"),tabPages[e].parentNode.style.display="none";e.classList.add("active"),tabPages[albumBtns.indexOf(e)].classList.add("active"),tabPages[albumBtns.indexOf(e)].parentNode.style.display="block"}}))});